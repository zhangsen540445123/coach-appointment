<!-- 评价列表页面 -->
<view class="review-list-page">
  <!-- 统计信息 -->
  <view class="stats-header" wx:if="{{stats}}">
    <view class="stats-rating">
      <text class="rating-value">{{stats.avgRating || '5.0'}}</text>
      <view class="rating-stars">
        <text wx:for="{{5}}" wx:key="*this" 
              class="star {{stats.avgRating >= (item + 1) ? 'full' : stats.avgRating >= (item + 0.5) ? 'half' : ''}}">★</text>
      </view>
    </view>
    <view class="stats-detail">
      <text class="total-count">共 {{stats.totalCount || 0}} 条评价</text>
    </view>
  </view>

  <!-- 评价列表 -->
  <view class="review-items">
    <view class="review-item" wx:for="{{reviewList}}" wx:key="id">
      <view class="user-info">
        <image class="user-avatar" src="{{item.userAvatar || '/static/img/photo.png'}}" mode="aspectFill"></image>
        <view class="user-detail">
          <view class="user-name">{{item.userName || '匿名用户'}}</view>
          <view class="review-time">{{item.createdAt}}</view>
        </view>
        <view class="rating-stars small">
          <text wx:for="{{5}}" wx:for-item="star" wx:key="*this" 
                class="star {{item.rating >= (star + 1) ? 'active' : ''}}">★</text>
        </view>
      </view>
      <view class="review-content" wx:if="{{item.content}}">{{item.content}}</view>
      <view class="review-images" wx:if="{{item.images && item.images.length > 0}}">
        <image wx:for="{{item.images}}" wx:for-item="img" wx:key="*this" 
               src="{{img}}" mode="aspectFill" bindtap="previewImage" 
               data-url="{{img}}" data-urls="{{item.images}}"></image>
      </view>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-more" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>

  <!-- 没有更多 -->
  <view class="no-more" wx:if="{{!loading && !hasMore && reviewList.length > 0}}">
    <text>已加载全部评价</text>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{!loading && reviewList.length === 0}}">
    <image src="/static/img/img-done.png" mode="aspectFit"></image>
    <text>暂无评价</text>
  </view>
</view>

