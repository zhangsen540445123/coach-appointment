(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/consult/certification"],{"64b2":function(e,o,t){(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=t("9359"),r=t("90c1"),n={data:function(){return{formData:{headUrl:null,idCard:null,realName:null,userName:null},formUser:{headUrl:null,userName:null,visitoruserId:null},globalData:null,orderInfo:null}},onLoad:function(e){var o=this;e.orderInfo&&"null"!==e.orderInfo&&(o.orderInfo=JSON.parse(decodeURIComponent(e.orderInfo))),setTimeout((function(){o.globalData=(0,r.storeGet)("counselor_info"),!1==!!o.globalData.userName&&(o.formUser.visitoruserId=o.globalData.userId,o.formUser.userName=o.globalData.userName)}),300)},methods:{updateVisitorWechatInfo:function(){var e=this;(0,a.irequestdata)({url:"/visitor/visitorUser/updateVisitorWechatInfo",method:"post",data:e.formUser,success:function(o){console.log(o),200===o.data.code&&e.verifyVisitor()},error:function(){}})},getUserProfile:function(){var o=this;e.getUserProfile({desc:"wechat",success:function(t){console.log("用户信息",t.rawData);var a={headUrl:t.userInfo.headUrl,userName:t.userInfo.nickName,openId:o.globalData.openId,userId:o.globalData.userId,authentication:o.globalData.authentication};e.setStorageSync("counselor_info",a),o.formUser.userName=t.userInfo.nickName,o.formUser.headUrl=t.userInfo.headUrl,o.formUser.visitoruserId=o.globalData.userId,o.updateVisitorWechatInfo()},fail:function(t){e.showModal({title:"提示",content:"需要授权后才能认证个人信息",confirmText:"确认授权",success:function(e){e.confirm&&(console.log("用户拒绝授权！"),o.getUserProfile())}})}})},verifyVisitor:function(){var o=this;!1!=!!this.formData.idCard?!1!=!!this.formData.realName?(0,a.irequestdata)({url:"/visitor/visitorUser/verifyVisitor",method:"post",data:o.formData,success:function(t){if(200===t.data.code){var a=JSON.stringify(o.orderInfo);e.navigateTo({url:"/pages/consult/completeInfo?orderInfo="+encodeURIComponent(a)})}},error:function(){console.log("新增失败")}}):e.showToast({title:"请输入您的真实证件号码",icon:"none"}):e.showToast({title:"请输入您的真实姓名",icon:"none"})}}};o.default=n}).call(this,t("df3c").default)},"795e":function(e,o,t){},a75f:function(e,o,t){t.d(o,"b",(function(){return a})),t.d(o,"c",(function(){return r})),t.d(o,"a",(function(){}));var a=function(){this.$createElement;var e=(this._self._c,t("7b13"));this.$mp.data=Object.assign({},{$root:{m0:e}})},r=[]},cab8:function(e,o,t){t.r(o);var a=t("a75f"),r=t("dda3");for(var n in r)["default"].indexOf(n)<0&&function(e){t.d(o,e,(function(){return r[e]}))}(n);t("dfed");var i=t("828b"),s=Object(i.a)(r.default,a.b,a.c,!1,null,"73c0b626",null,!1,a.a,void 0);o.default=s.exports},dda3:function(e,o,t){t.r(o);var a=t("64b2"),r=t.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){t.d(o,e,(function(){return a[e]}))}(n);o.default=r.a},dfed:function(e,o,t){var a=t("795e");t.n(a).a},ec5c:function(e,o,t){(function(e,o){var a=t("47a9");t("6686"),a(t("3240"));var r=a(t("cab8"));e.__webpack_require_UNI_MP_PLUGIN__=t,o(r.default)}).call(this,t("3223").default,t("df3c").createPage)}},[["ec5c","common/runtime","common/vendor"]]]);