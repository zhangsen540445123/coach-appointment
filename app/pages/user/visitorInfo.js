(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/user/visitorInfo"],{"1ce7":function(t,n,o){o.r(n);var e=o("7d8e"),i=o("4496");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(n,t,(function(){return i[t]}))}(a);o("436f");var u=o("828b"),d=Object(u.a)(i.default,e.b,e.c,!1,null,"dd3ed10e",null,!1,e.a,void 0);n.default=d.exports},"436f":function(t,n,o){var e=o("8f78");o.n(e).a},"437d":function(t,n,o){(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=o("9359"),i=o("90c1"),a={data:function(){return{globalData:null,formData:{realName:'',age:'',gender:1,city:'',occupation:'',emotionalStatus:'',hasChildren:0,coachingGoal:'',isGrowthMember:0,hasCoachingExp:0,sourceChannel:''},sourceChannels:['只管去做成长会','公众号','悦行活动','朋友推荐','其他'],sourceIndex:0}},onShow:function(){var t=this;setTimeout((function(){t.globalData=(0,i.storeGet)("counselor_info"),t.globalData&&t.globalData.userId&&t.loadVisitorInfo(t.globalData.userId)}),500)},methods:{loadVisitorInfo:function(t){var n=this;(0,e.irequestdata)({url:"/visitor/visitorInfo/showUserVisitorInfoByUserid",method:"get",data:{userId:t},success:function(t){if(200===t.data.code&&t.data.data&&t.data.data.length>0){var o=t.data.data[0];n.formData={realName:o.realName||'',age:o.age||'',gender:o.gender||1,city:o.city||'',occupation:o.occupation||'',emotionalStatus:o.emotionalStatus||'',hasChildren:o.hasChildren||0,coachingGoal:o.coachingGoal||'',isGrowthMember:o.isGrowthMember||0,hasCoachingExp:o.hasCoachingExp||0,sourceChannel:o.sourceChannel||''};var e=n.sourceChannels.indexOf(o.sourceChannel);n.sourceIndex=e>=0?e:0}}}})},onInput:function(t){var n=t.currentTarget.dataset.field,o=t.detail.value;this.formData[n]=o},onGenderSelect:function(t){this.formData.gender=parseInt(t.currentTarget.dataset.value)},onChildrenSelect:function(t){this.formData.hasChildren=parseInt(t.currentTarget.dataset.value)},onMemberSelect:function(t){this.formData.isGrowthMember=parseInt(t.currentTarget.dataset.value)},onExpSelect:function(t){this.formData.hasCoachingExp=parseInt(t.currentTarget.dataset.value)},onSourceChange:function(t){var n=t.detail.value;this.sourceIndex=n,this.formData.sourceChannel=this.sourceChannels[n]},saveForm:function(){var n=this;if(!this.formData.realName)return t.showToast({title:'请输入真实姓名',icon:'none'});if(!this.formData.age)return t.showToast({title:'请输入年龄',icon:'none'});var o={userId:this.globalData.userId,realName:this.formData.realName,age:parseInt(this.formData.age),gender:this.formData.gender,city:this.formData.city,occupation:this.formData.occupation,emotionalStatus:this.formData.emotionalStatus,hasChildren:this.formData.hasChildren,coachingGoal:this.formData.coachingGoal,isGrowthMember:this.formData.isGrowthMember,hasCoachingExp:this.formData.hasCoachingExp,sourceChannel:this.formData.sourceChannel};(0,e.irequestdata)({url:"/visitor/visitorInfo/save",method:"post",data:o,success:function(o){200===o.data.code?(t.showToast({title:'保存成功',icon:'success'}),setTimeout((function(){t.navigateBack()}),1500)):t.showToast({title:o.data.msg||'保存失败',icon:'none'})},error:function(){t.showToast({title:'保存失败',icon:'none'})}})}}};n.default=a}).call(this,o("df3c").default)},4496:function(t,n,o){o.r(n);var e=o("437d"),i=o.n(e);for(var a in e)["default"].indexOf(a)<0&&function(t){o.d(n,t,(function(){return e[t]}))}(a);n.default=i.a},"6ab6":function(t,n,o){(function(t,n){var e=o("47a9");o("6686"),e(o("3240"));var i=e(o("1ce7"));t.__webpack_require_UNI_MP_PLUGIN__=o,n(i.default)}).call(this,o("3223").default,o("df3c").createPage)},"7d8e":function(t,n,o){o.d(n,"b",(function(){return e})),o.d(n,"c",(function(){return i})),o.d(n,"a",(function(){}));var e=function(){var t=this;t.$createElement,t._self._c;t.$mp.data=Object.assign({},{$root:{g0:t.formData,g1:t.sourceChannels,g2:t.sourceIndex}})},i=[]},"8f78":function(t,n,o){}},[["6ab6","common/runtime","common/vendor"]]]);